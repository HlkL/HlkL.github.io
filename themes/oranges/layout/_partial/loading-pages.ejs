<% if (is_post()) { %>
  <div class="loading-container">
    <div class="loading-spinner">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>

  <script>
    // 使用DOMContentLoaded事件，在DOM加载完成后立即隐藏加载动画
    document.addEventListener('DOMContentLoaded', () => {
      const loader = document.querySelector('.loading-container');
      loader.classList.add('loading-finished');
      setTimeout(() => {
        loader.style.display = 'none';
      }, 100);
    });

    // 监听资源加载事件，确保在任何资源加载完成时也能隐藏加载动画
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive' || document.readyState === 'complete') {
        const loader = document.querySelector('.loading-container');
        loader.classList.add('loading-finished');
        setTimeout(() => {
          loader.style.display = 'none';
        }, 100);
      }
    });
  </script>
<% } %>